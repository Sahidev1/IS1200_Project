#include <pic32mx.h>
#include "game_header.h"
#include <stdint.h>

uint8_t player[30][2] = {{12,2},{13,2},{14,2},{15,2},{16,2},
{17,2},{18,2},{13,3},{17,3},{14,4},
{16,4},{15,5},{14,6},{16,6},{13,7},
{17,7},{13,8},{17,8},{12,9},{18,9},
{12,10},{14,10},{18,10},{13,11},{17,11},
{13,12},{17,12},{14,13},{16,13},{15,14}
};

uint8_t obst0[30][2] = {{30,129},{31,129},{27,130},{28,130},{29,130},
{24,131},{25,131},{26,131},{21,132},{22,132},
{23,132},{18,133},{19,133},{20,133},{16,134},
{17,134},{18,135},{19,135},{20,135},{21,136},
{22,136},{23,136},{24,137},{25,137},{26,137},
{27,138},{28,138},{29,138},{30,139},{31,139}
};

uint8_t obst1[51][2] = {{0,130},{1,130},{2,130},{3,130},{4,130},
{20,130},{21,130},{22,130},{23,130},{24,130},
{25,130},{26,130},{27,130},{28,130},{29,130},
{30,130},{31,130},{4,131},{5,131},{19,131},
{21,131},{5,132},{18,132},{22,132},{5,133},
{18,133},{22,133},{5,134},{18,134},{22,134},
{4,135},{5,135},{19,135},{21,135},{0,136},
{1,136},{2,136},{3,136},{4,136},{20,136},
{21,136},{22,136},{23,136},{24,136},{25,136},
{26,136},{27,136},{28,136},{29,136},{30,136},
{31,136}};



void game (){
    
    int btn_stat = getbtns();
    char direction; 

    switch (btn_stat)
    {
    case 1:
        direction = 'd';
        break;
    case 2: 
        direction = 'r';
        break;
    case 4:
        direction = 'u';
        break;
    case 8:
        direction = 'l';
        break;
    default:
        break;
    }

    int steps = 1;
    
    setPixels(30,2,player[0]);
    //setPixels(30, 2,obst0[0]);
    setPixels(51,2,obst1[0]);

    render();
    //quicksleep();
    clearPixels(30,2,player[0]);
    //clearPixels(30, 2, obst0[0]);
    clearPixels(51,2,obst1[0]);

    accurate_delay (30);
    //movePixels (1, 30, 2, 'l', obst0[0]);
    movePixels(1,51,2,'l',obst1[0]);
    if (btn_stat){
        movePixels (steps, 30, 2, direction, player[0]);
    }
    
}
